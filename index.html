<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TPE by NSRM Groupe</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, white, #bcbcbc, orange);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      overflow-x: hidden;
    }

    /* En-tête spécifique à la page de connexion */
    .login-header {
      margin-top: 20px;
      text-align: center;
    }
    .login-header img {
      width: 180px;
    }
    .login-header p {
      margin-top: 10px;
      color: #080808;
      font-size: 18px;
    }

    /* En-tête simplifié pour les autres pages */
    .main-header {
      margin-top: 20px;
      text-align: center;
      display: none;
    }
    .main-header img {
      width: 180px;
    }
    .main-header p {
      margin-top: 5px;
      color: #080808;
      font-size: 14px;
    }

    .honeycomb {
      margin-top: 80px;
      width: 300px;
      padding: 30px;
      background: linear-gradient(to bottom, orange, #444);
      border-radius: 20% 20% 0 0 / 30% 30% 0 0;
      box-shadow: 0 0 20px rgba(255, 165, 0, 0.7), 0 0 40px rgba(100, 100, 100, 0.7);
      text-align: center;
    }

    .honeycomb h2 {
      margin-bottom: 20px;
      color: white;
      font-size: 24px;
    }

    input[type="text"], input[type="password"], textarea {
      width: 80%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      outline: none;
    }

    textarea {
      height: 100px;
      resize: vertical;
    }

    button {
      margin-top: 15px;
      padding: 12px 24px;
      background-color: #ff6600;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #e65c00;
    }

    .dashboard {
      display: none;
      margin-top: 80px;
      text-align: center;
      animation: fadeIn 1s ease-in-out;
    }

    .service-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      justify-content: center;
    }

    .hex-button {
      width: 120px;
      height: 104px;
      background: linear-gradient(to bottom, orange, #555);
      clip-path: polygon(
        50% 0%, 
        93% 25%, 
        93% 75%, 
        50% 100%, 
        7% 75%, 
        7% 25%
      );
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255,165,0,0.7);
    }

    .hex-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(255, 165, 0, 1);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Bouton de déconnexion UNIQUEMENT sur la page d'accueil */
    #logoutBtn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #333;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(255, 165, 0, 0.7);
      transition: 0.3s ease;
      z-index: 999;
      display: none;
    }

    #logoutBtn:hover {
      background-color: #555;
    }

    /* Pages des services */
    .service-page {
      display: none;
      width: 90%;
      max-width: 800px;
      margin: 30px auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      animation: fadeIn 0.5s ease-in-out;
    }

    .service-page h2 {
      color: #ff6600;
      margin-bottom: 20px;
    }

    .tpe-item, .invoice-item, .support-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      margin: 10px 0;
      background: #f5f5f5;
      border-radius: 8px;
      border-left: 4px solid #ff6600;
    }

    .status {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .status.connected {
      background-color: #4CAF50;
    }

    .status.disconnected {
      background-color: #F44336;
    }

    .toggle-btn {
      padding: 5px 10px;
      background-color: #ff6600;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .toggle-btn.off {
      background-color: #777;
    }

    .download-btn, .call-btn, .send-btn {
      padding: 5px 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .call-btn {
      background-color: #2196F3;
    }

    .back-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #333;
      color: white;
    }

    /* Fil d'actualité - Défilement infini */
    .news-container {
      position: fixed;
      bottom: 70px; /* Positionné en haut à 12px du bord */
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 8px 0;
      font-size: 34px;
      display: none;
      overflow: hidden;
      z-index: 100; /* Assure qu'il est au-dessus du contenu */
    }

    .news-ticker {
      display: inline-block;
      white-space: nowrap;
      padding-left: 100%; /* Démarre complètement à droite */
      animation: ticker 40s linear infinite;
    }

    @keyframes ticker {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .news-item {
      display: inline-block;
      margin-right: 60px;
    }

    /* Formulaire de contact */
    .contact-form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .contact-form label {
      align-self: flex-start;
      margin-left: 10%;
      margin-top: 10px;
      font-weight: bold;
    }

    /* Modal de confirmation */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      max-width: 400px;
      width: 90%;
    }

    .modal-close {
      margin-top: 20px;
      padding: 8px 16px;
      background: #ff6600;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- En-tête de la page de connexion -->
  <div id="loginHeader" class="login-header">
    <img src="tep.png" alt="Logo TPE by NSRM Groupe">
    <p>Une solution innovante pour vos paiements professionnels <br> By NSRM</p>
  </div>

  <!-- En-tête simplifié pour les autres pages -->
  <div id="mainHeader" class="main-header">
    <img src="tep.png" alt="Logo TPE by NSRM Groupe">
    <p>By NSRM</p>
  </div>

  <!-- Fil d'actualité (positionné en haut) -->
  <div id="newsContainer" class="news-container">
    <div class="news-ticker" id="newsTicker">
      <!-- Les actualités seront injectées ici -->
    </div>
  </div>

  <!-- PAGE DE CONNEXION -->
  <div id="loginPage" class="honeycomb">
    <h2>Bienvenue</h2>
    <input type="text" id="username" placeholder="Nom d'utilisateur" />
    <br>
    <input type="password" id="password" placeholder="Mot de passe" />
    <br>
    <button onclick="login()">Entrer</button>
  </div>

  <!-- PAGE APRÈS CONNEXION -->
  <div id="dashboardPage" class="dashboard">
    <h2>Services disponibles</h2>
    <div class="service-buttons">
      <div class="hex-button" onclick="showService('service1')">TPE</div>
      <div class="hex-button" onclick="showService('service2')">Factures</div>
      <div class="hex-button" onclick="showService('service3')">Assistance</div>
      <div class="hex-button" onclick="showService('service4')">Contact</div>
    </div>
  </div>

  <!-- PAGE SERVICE 1 - TPE -->
  <div id="service1" class="service-page">
    <h2>Gestion des TPE</h2>
    <div id="tpeList">
      <!-- Les TPE seront générés dynamiquement -->
    </div>
    <button class="back-btn" onclick="backToDashboard()">Retour à l'accueil</button>
  </div>

  <!-- PAGE SERVICE 2 - FACTURES -->
  <div id="service2" class="service-page">
    <h2>Factures des 12 derniers mois</h2>
    <div id="invoiceList">
      <!-- Les factures seront générées dynamiquement -->
    </div>
    <button class="back-btn" onclick="backToDashboard()">Retour à l'accueil</button>
  </div>

  <!-- PAGE SERVICE 3 - ASSISTANCE -->
  <div id="service3" class="service-page">
    <h2>Assistance technique</h2>
    <div id="supportList">
      <!-- Les contacts seront générés dynamiquement -->
    </div>
    <button class="back-btn" onclick="backToDashboard()">Retour à l'accueil</button>
  </div>

  <!-- PAGE SERVICE 4 - CONTACT -->
  <div id="service4" class="service-page">
    <h2>Contactez-nous</h2>
    <div class="contact-form">
      <label for="contact-name">Votre nom :</label>
      <input type="text" id="contact-name" placeholder="Votre nom complet">
      
      <label for="contact-email">Votre email :</label>
      <input type="text" id="contact-email" placeholder="Votre adresse email">
      
      <label for="contact-subject">Sujet :</label>
      <input type="text" id="contact-subject" placeholder="Objet de votre message">
      
      <label for="contact-message">Votre message :</label>
      <textarea id="contact-message" placeholder="Décrivez votre question ou demande"></textarea>
      
      <button class="send-btn" onclick="sendContactForm()">Envoyer le message</button>
    </div>
    <button class="back-btn" onclick="backToDashboard()">Retour à l'accueil</button>
  </div>

  <!-- Modal de confirmation -->
  <div id="confirmationModal" class="modal">
    <div class="modal-content">
      <h3>Message envoyé avec succès !</h3>
      <p>Nous avons bien reçu votre demande et vous répondrons dans les plus brefs délais.</p>
      <button class="modal-close" onclick="closeModal()">Fermer</button>
    </div>
  </div>

  <!-- BOUTON DE DÉCONNEXION -->
  <button id="logoutBtn" onclick="logout()">Déconnexion</button>

  <!-- SCRIPT -->
  <script>
    // Données des actualités
    const newsItems = [
      "15/06/2025 - Nouvelle mise à jour des terminaux TPE disponible",
      "01/06/2025 - WebSite developed By SARMOUME_NasrEddine",
      "20/05/2025 - Nouvelle offre commerciale pour les commerçants",
      "10/05/2025 - Nos équipes seront présentes au Salon des Commerçants le 25 mai",
      "28/04/2025 - Mise en place d'un nouveau service client 24/7",
      "15/04/2025 - Nouveaux tarifs avantageux pour les petits commerces",
      "01/04/2025 - Application mobile mise à jour avec nouvelles fonctionnalités"
    ];

    function login() {
      const user = document.getElementById('username').value.trim();
      const pass = document.getElementById('password').value.trim();

      if (user === '' || pass === '') {
        alert("Veuillez remplir tous les champs.");
        return;
      }

      // Simule la connexion réussie
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('loginHeader').style.display = 'none';
      document.getElementById('mainHeader').style.display = 'block';
      document.getElementById('dashboardPage').style.display = 'block';
      document.getElementById('logoutBtn').style.display = 'block';
      document.getElementById('newsContainer').style.display = 'block';
      
      // Génère les données des services
      generateTPEList();
      generateInvoiceList();
      generateSupportList();
      setupNewsTicker();
    }

    function logout() {
      // Retour à la page de connexion
      document.getElementById('dashboardPage').style.display = 'none';
      document.getElementById('loginPage').style.display = 'block';
      document.getElementById('loginHeader').style.display = 'block';
      document.getElementById('mainHeader').style.display = 'none';
      document.getElementById('logoutBtn').style.display = 'none';
      document.getElementById('newsContainer').style.display = 'none';
      
      // Cache toutes les pages de service
      document.querySelectorAll('.service-page').forEach(page => {
        page.style.display = 'none';
      });
    }

    function showService(serviceId) {
      // Cache le tableau de bord et les news
      document.getElementById('dashboardPage').style.display = 'none';
      document.getElementById('newsContainer').style.display = 'none';
      document.getElementById('logoutBtn').style.display = 'none';
      
      // Affiche la page du service demandé
      document.getElementById(serviceId).style.display = 'block';
    }

    function backToDashboard() {
      // Cache toutes les pages de service
      document.querySelectorAll('.service-page').forEach(page => {
        page.style.display = 'none';
      });
      
      // Affiche le tableau de bord, les news et le bouton de déconnexion
      document.getElementById('dashboardPage').style.display = 'block';
      document.getElementById('newsContainer').style.display = 'block';
      document.getElementById('logoutBtn').style.display = 'block';
    }

    function setupNewsTicker() {
      const newsTicker = document.getElementById('newsTicker');
      newsTicker.innerHTML = '';
      
      // Crée les éléments d'actualités pour le défilement
      newsItems.forEach(news => {
        const item = document.createElement('span');
        item.className = 'news-item';
        item.textContent = news + ' • '; // Ajoute un séparateur
        newsTicker.appendChild(item);
      });
    }

    function generateTPEList() {
      const tpeList = document.getElementById('tpeList');
      tpeList.innerHTML = '';
      
      // Génère 12 TPE (8 connectés, 4 déconnectés)
      for (let i = 1; i <= 12; i++) {
        const isConnected = i <= 8;
        const tpeItem = document.createElement('div');
        tpeItem.className = 'tpe-item';
        tpeItem.innerHTML = `
          <div>
            <span class="status ${isConnected ? 'connected' : 'disconnected'}"></span>
            <strong>TPE-${i.toString().padStart(2, '0')}</strong>
          </div>
          <button class="toggle-btn ${isConnected ? '' : 'off'}" onclick="toggleTPE(this, ${i})">
            ${isConnected ? 'ON' : 'OFF'}
          </button>
        `;
        tpeList.appendChild(tpeItem);
      }
    }

    function toggleTPE(button, tpeId) {
      const isOn = button.textContent.trim() === 'ON';
      button.textContent = isOn ? 'OFF' : 'ON';
      button.className = isOn ? 'toggle-btn off' : 'toggle-btn';
      
      // Met à jour le point de statut
      const statusDot = button.parentElement.querySelector('.status');
      statusDot.className = isOn ? 'status disconnected' : 'status connected';
      
      // Ici, vous pourriez ajouter une requête AJAX pour mettre à jour le statut réel du TPE
      console.log(`TPE ${tpeId} mis à ${isOn ? 'OFF' : 'ON'}`);
    }

    function generateInvoiceList() {
      const invoiceList = document.getElementById('invoiceList');
      invoiceList.innerHTML = '';
      
      const months = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 
                      'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];
      const currentMonth = new Date().getMonth();
      
      // Génère les 12 derniers mois de factures
      for (let i = 0; i < 12; i++) {
        const monthIndex = (currentMonth - i + 12) % 12;
        const year = new Date().getFullYear() - (i > currentMonth ? 1 : 0);
        
        const invoiceItem = document.createElement('div');
        invoiceItem.className = 'invoice-item';
        invoiceItem.innerHTML = `
          <div>
            <strong>Facture ${months[monthIndex]} ${year}</strong>
            <span> - Montant: ${(Math.random() * 500 + 50).toFixed(2)}€</span>
          </div>
          <button class="download-btn" onclick="downloadInvoice('${months[monthIndex]} ${year}')">
            Télécharger
          </button>
        `;
        invoiceList.appendChild(invoiceItem);
      }
    }

    function downloadInvoice(monthYear) {
      // Simule le téléchargement d'une facture
      console.log(`Téléchargement de la facture ${monthYear}`);
      alert(`Facture ${monthYear} téléchargée (simulation)`);
    }

    function generateSupportList() {
      const supportList = document.getElementById('supportList');
      supportList.innerHTML = '';
      
      const supportNumbers = [
        {name: "Support technique", number: "01 23 45 67 89"},
        {name: "Support commercial", number: "01 23 45 67 90"},
        {name: "Support financier", number: "01 23 45 67 91"},
        {name: "Urgences techniques", number: "01 23 45 67 92"},
        {name: "Service après-vente", number: "01 23 45 67 93"},
        {name: "Service comptabilité", number: "01 23 45 67 94"},
        {name: "Service marketing", number: "01 23 45 67 95"},
        {name: "Direction générale", number: "01 23 45 67 96"}
      ];
      
      // Génère les contacts d'assistance
      supportNumbers.forEach((support, index) => {
        const supportItem = document.createElement('div');
        supportItem.className = 'support-item';
        supportItem.innerHTML = `
          <div>
            <strong>${support.name}</strong>
            <div>${support.number}</div>
          </div>
          <button class="call-btn" onclick="callSupport('${support.number}')">
            Appeler
          </button>
        `;
        supportList.appendChild(supportItem);
      });
    }

    function callSupport(number) {
      // Simule un appel téléphonique
      console.log(`Appel du support: ${number}`);
      alert(`Appel vers ${number} (simulation)`);
    }

    function sendContactForm() {
      const name = document.getElementById('contact-name').value.trim();
      const email = document.getElementById('contact-email').value.trim();
      const subject = document.getElementById('contact-subject').value.trim();
      const message = document.getElementById('contact-message').value.trim();

      if (!name || !email || !subject || !message) {
        alert("Veuillez remplir tous les champs du formulaire.");
        return;
      }

      // Ici, normalement vous auriez un appel AJAX pour envoyer le formulaire
      console.log("Message envoyé :", {name, email, subject, message});
      
      // Affiche la modal de confirmation
      document.getElementById('confirmationModal').style.display = 'flex';
      
      // Réinitialise le formulaire
      document.getElementById('contact-name').value = '';
      document.getElementById('contact-email').value = '';
      document.getElementById('contact-subject').value = '';
      document.getElementById('contact-message').value = '';
    }

    function closeModal() {
      document.getElementById('confirmationModal').style.display = 'none';
    }
  </script>

</body>
</html>